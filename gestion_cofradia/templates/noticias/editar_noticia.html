{% extends "base.html" %}
{% block title %}Editar Noticia{% endblock %}

{% block content %}
<div class="container mt-4">
  <h1><i class="fas fa-edit"></i> Editar Noticia</h1>

  <div class="card shadow-sm mt-3">
    <div class="card-body">
      <form method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <!-- Título -->
        <div class="mb-3">
          <label for="id_titulo" class="form-label">Título</label>
          {{ form.titulo }}
        </div>

        <!-- Cuerpo -->
        <div class="mb-3">
          <label for="id_cuerpo" class="form-label">Cuerpo</label>
          {{ form.cuerpo }}
        </div>

        <!-- Imagen -->
        <div class="mb-3">
          <label for="id_imagen" class="form-label">Imagen</label>
          {{ form.imagen }}
          {% if noticia.imagen %}
            <div class="mt-2">
              <p class="text-muted">Imagen actual:</p>
              <img src="{{ noticia.imagen.url }}" alt="Imagen actual" 
                   class="img-thumbnail shadow-sm" style="max-height: 150px;">
            </div>
          {% endif %}
        </div>

        <!-- Público -->
        <div class="form-check mb-3">
          {{ form.publico }}
          <label for="id_publico" class="form-check-label">Visible en web pública</label>
        </div>

        <!-- Botones -->
        <div class="mt-4">
          <button type="submit" class="btn btn-success">
            <i class="fas fa-save"></i> Guardar cambios
          </button>
          <a href="{% url 'gestion_cofradia:lista_noticias' %}" class="btn btn-secondary">
            <i class="fas fa-times"></i> Cancelar
          </a>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}