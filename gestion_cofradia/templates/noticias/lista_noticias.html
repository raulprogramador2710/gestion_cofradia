{% extends "base.html" %}
{% block title %}Noticias{% endblock %}
{% block content %}
<div class="container">
  <h1><i class="fas fa-newspaper"></i> Noticias</h1>
  <a href="{% url 'gestion_cofradia:crear_noticia' %}" class="btn btn-primary mb-3">
    <i class="fas fa-plus"></i> Nueva Noticia
  </a>
  <div class="card">
    <div class="card-body p-0">
      <table class="table table-striped mb-0">
        <thead>
          <tr>
            <th>Imagen</th>
            <th>Título</th>
            <th>Fecha</th>
            <th>Público</th>
            <th class="text-center">Acciones</th>
          </tr>
        </thead>
        <tbody>
          {% for noticia in noticias %}
          <tr>
            <td>
              {% if noticia.imagen %}
                <img src="{{ noticia.imagen.url }}" alt="{{ noticia.titulo }}" 
                     class="img-thumbnail" style="max-width: 60px; max-height: 60px;">
              {% else %}
                <span class="text-muted"><i class="fas fa-image"></i> Sin imagen</span>
              {% endif %}
            </td>
            <td>{{ noticia.titulo }}</td>
            <td>{{ noticia.fecha_publicacion|date:"d/m/Y" }}</td>
            <td>
              {% if noticia.publico %}
                <span class="badge bg-success">Sí</span>
              {% else %}
                <span class="badge bg-secondary">No</span>
              {% endif %}
            </td>
            <td class="acciones text-center">
              <a href="{% url 'gestion_cofradia:ver_noticia' noticia.id %}" class="btn btn-sm btn-info" title="Ver">
                <i class="fas fa-eye"></i>
              </a>
              <a href="{% url 'gestion_cofradia:editar_noticia' noticia.id %}" class="btn btn-sm btn-secondary" title="Editar">
                <i class="fas fa-edit"></i>
              </a>
              <a href="{% url 'gestion_cofradia:eliminar_noticia' noticia.id %}" class="btn btn-sm btn-danger" title="Eliminar">
                <i class="fas fa-trash"></i>
              </a>
            </td>
          </tr>
          {% empty %}
          <tr><td colspan="5" class="text-center text-muted">No hay noticias registradas</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}