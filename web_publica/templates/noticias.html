{% extends "base_web.html" %}
{% load static %}

{% block title %}Noticias - Hermandad de la Expiración{% endblock %}

{% block content %}
<main class="site-main py-5">

  <!-- CABECERA -->
  <section class="page-header text-center mb-5">
    <div class="container">
      <h1 class="entry-title text-cofrade-gold">Noticias de la Hermandad</h1>
      <hr class="mb-4" style="border-top:2px solid var(--cofrade-gold);width:120px;">
    </div>
  </section>

  <!-- LISTADO DE NOTICIAS -->
  <section class="page-content">
    <div class="container">
      <div class="row">

        {% for noticia in noticias %}
        <div class="col-md-4 mb-4">
          <div class="card h-100 shadow-sm border-0">
            
            <!-- Imagen -->
            {% if noticia.imagen %}
              <a href="{% url 'web_publica:noticia_detalle' noticia.id %}">
                <img src="{{ noticia.imagen.url }}" class="card-img-top" alt="{{ noticia.titulo }}">
              </a>
            {% else %}
              <a href="{% url 'web_publica:noticia_detalle' noticia.id %}">
                <img src="{% static 'img/public/placeholder.jpg' %}" class="card-img-top" alt="Sin imagen">
              </a>
            {% endif %}
            
            <!-- Texto -->
            <div class="card-body d-flex flex-column">
              <h5 class="card-title">{{ noticia.titulo }}</h5>
              <p class="card-text text-muted small">
                {{ noticia.fecha_publicacion|date:"d/m/Y" }}
              </p>
              <p class="card-text">
                {{ noticia.cuerpo|truncatewords:20 }}
              </p>
              <a href="{% url 'web_publica:noticia_detalle' noticia.id %}" 
                 class="btn btn-main mt-auto">Leer más</a>
            </div>
          </div>
        </div>
        {% empty %}
          <div class="col-12 text-center">
            <p>No hay noticias disponibles.</p>
          </div>
        {% endfor %}

      </div>
    </div>
  </section>

</main>
{% endblock %}